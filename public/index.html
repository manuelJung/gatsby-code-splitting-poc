<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.13.39-dev-1585149571197"/><style data-styled="" data-styled-version="5.0.1">.kGObSu{padding:20px;max-width:800px;margin:0 auto;text-align:center;}
.kGObSu p{font-size:18px;}
data-styled.g1[id="Homepage__Wrapper-noc56o-0"]{content:"kGObSu,"}
</style><link as="script" rel="preload" href="/webpack-runtime-d51ef068a35f6f916873.js"/><link as="script" rel="preload" href="/app-86985901602601a9f1e3.js"/><link as="script" rel="preload" href="/9-4c4567bfa4cf35caddc4.js"/><link as="script" rel="preload" href="/component---src-templates-homepage-js-834582587c3e8d6c2520.js"/><link as="script" rel="preload" href="/widget---src-widgets-widget-example-1-js-326b4e24b8b5ed5e2fa4.js"/><link as="script" rel="preload" href="/widget---src-widgets-widget-example-2-js-75b2218fac2e04e275a3.js"/><link as="fetch" rel="preload" href="/page-data/index/page-data.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Homepage__Wrapper-noc56o-0 kGObSu Homepage"><h1>Gatsby Code-Splitting POC</h1><p>Welcome to the gatsby code splitting POC. Here I will describe a way how we could code-split dynamic react components. Normally gatsby splits code by pages. That is fine for most use-cases. But there is one situation where this does not work:</p><p><b>Based on cms data like json, markdown or any data from an api that relies on specific react-components we have to add all possible components into the bundle to archieve an correct prerendering of the page</b></p><p>Following are some components that are already code-splitted:</p><p>Hello from WidgetExample1</p><p>Hello from WidgetExample2</p><p>These widgets are manually added in gatsby-node under the <b>widgets</b> key. All these widgets are added to the page and won&#x27;t get added to any other page. When you build the app you can see, that these widgets are added as an async script to the dom and are loaded seperatly with the prefix <b>widget--</b>. Check your network tab</p><p>That is an very basic example and won&#x27;t happen in real apps. So let&#x27;s get more realistic: We create some blog posts that can render custom components. I&#x27;ve created some posts under <b>src/cms/posts/[post].json</b>. These posts are picked um by the graphql-layer and we create pages for each post:</p><ul><li><a href="/posts/post-1">Post 1</a></li><li><a href="/posts/post-2">Post 2</a></li></ul><p>If you inspect the network you can see, that all widgets that are used by my posts are injected with a preload flag. that is done similar than gatsby preloads pages. When you click on a post the post will only render when all widgets are fetched --- just like page-components</p><p>Some interresting feature that is missing is, that we could enable &quot;widget-queries&quot; just like normal page queries. That could be a killer feature because it could enable dyamic queries deep within your component tree.<br/></p></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/";window.webpackCompilationHash="10a87ebf4b5d1e039983";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-86985901602601a9f1e3.js"],"component---src-templates-homepage-js":["/component---src-templates-homepage-js-834582587c3e8d6c2520.js"],"component---src-templates-post-js":["/component---src-templates-post-js-93cfccde09e12ee638b7.js"],"component---src-pages-404-js":["/component---src-pages-404-js-7effd0c48f15c7925450.js"],"widget---src-widgets-widget-example-1-js":["/widget---src-widgets-widget-example-1-js-326b4e24b8b5ed5e2fa4.js"],"widget---src-widgets-widget-example-2-js":["/widget---src-widgets-widget-example-2-js-75b2218fac2e04e275a3.js"],"widget---src-widgets-headline-js":["/widget---src-widgets-headline-js-491d0e514b351b20730f.js"],"widget---src-widgets-paragraph-js":["/widget---src-widgets-paragraph-js-e4fc34162111481fb3ac.js"]};/*]]>*/</script><script src="/widget---src-widgets-widget-example-2-js-75b2218fac2e04e275a3.js" async=""></script><script src="/widget---src-widgets-widget-example-1-js-326b4e24b8b5ed5e2fa4.js" async=""></script><script src="/component---src-templates-homepage-js-834582587c3e8d6c2520.js" async=""></script><script src="/9-4c4567bfa4cf35caddc4.js" async=""></script><script src="/app-86985901602601a9f1e3.js" async=""></script><script src="/webpack-runtime-d51ef068a35f6f916873.js" async=""></script></body></html>